<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ERD — Voting System (Mermaid)</title>
  <style>
    body{font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:#f6f9fc;margin:0;padding:24px}
    .container{max-width:900px;margin:0 auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 8px 30px rgba(20,40,80,0.06)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin-top:0;color:#444}
    .notes{margin-top:18px;font-size:14px;color:#333}
    .note-item{margin:6px 0}
    footer{margin-top:18px;color:#666;font-size:13px}
  </style>
  <script type="module">
    // Load mermaid from CDN
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
    window.mermaid = mermaid;
  </script>
</head>
<body>
  <div class="container">
  <h1>ERD — Sistem Pengundian</h1>
  <p class="lead">Rajah ERD model pangkalan data dalam Bahasa Malaysia. Buka fail ini dalam pelayar moden untuk melihat diagram.</p>

    <div class="mermaid">
flowchart LR
  %% Entities as rectangles, attributes as ovals, relationships as diamonds

  subgraph E1[PENGGUNA]
    direction TB
    PU["PENGGUNA"]:::entity
  end
  u1((ID_Pengguna))
  u2((Username))
  u3((Kata_Laluan_Hash))
  u4((Is_Admin))
  u5((Tarikh_Dicipta))
  u1 --- PU
  u2 --- PU
  u3 --- PU
  u4 --- PU
  u5 --- PU

  subgraph E2[JAWATAN]
    direction TB
    PJ["JAWATAN"]:::entity
  end
  j1((ID_Jawatan))
  j2((Nama_Jawatan))
  j3((Keterangan))
  j1 --- PJ
  j2 --- PJ
  j3 --- PJ

  subgraph E3[CALON]
    direction TB
    PC["CALON"]:::entity
  end
  c1((ID_Calon))
  c2(("ID_Jawatan (FK)"))
  c3((Nama_Calon))
  c4((Bio))
  c1 --- PC
  c2 --- PC
  c3 --- PC
  c4 --- PC

  subgraph E4[SESI_UNDI]
    direction TB
    PS["SESI_UNDI"]:::entity
  end
  s1((ID_Sesi))
  s2((Nama_Sesi))
  s3((Tarikh_Mula))
  s4((Tarikh_Tamat))
  s5((Is_Active))
  s1 --- PS
  s2 --- PS
  s3 --- PS
  s4 --- PS
  s5 --- PS

  subgraph E5[UNDI]
    direction TB
    PV["UNDI"]:::entity
  end
  v1((ID_Undi))
  v2(("ID_Pengguna (FK)"))
  v3(("ID_Jawatan (FK)"))
  v4(("ID_Calon (FK)"))
  v5((Tarikh))
  v1 --- PV
  v2 --- PV
  v3 --- PV
  v4 --- PV
  v5 --- PV

  %% Relationships as diamonds
  R1{"mempunyai"}
  R2{"mengundi"}
  R3{"menerima"}
  R4{"mengandungi"}

  PJ --- R1 --- PC
  PU --- R2 --- PV
  PC --- R3 --- PV
  PJ --- PV
  PS --- R4 --- PJ

  classDef entity fill:#ffffff,stroke:#000,stroke-width:1px
  </div>

    <div class="notes">
      <strong>Nota / Kekangan</strong>
      <div class="note-item">- Pastikan UNIQUE(ID_Pengguna, ID_Jawatan) pada jadual <code>UNDI</code> untuk mengelakkan pengundian berganda bagi setiap jawatan.</div>
      <div class="note-item">- Simpan kata laluan hanya sebagai hash yang kuat (contoh: bcrypt/argon2) dalam <code>Kata_Laluan_Hash</code>.</div>
      <div class="note-item">- Sentiasa lakukan pengesahan undi di pelayan; jangan hanya bergantung pada pemeriksaan di klien.</div>
      <div class="note-item">- Gunakan transaksi pangkalan data apabila memasukkan rekod undi untuk mengelakkan masalah perlumbaan semasa pengiraan.</div>
    </div>

    <footer>
      To view: open this file in a modern browser (or use VS Code Mermaid preview). If your browser blocks module imports from CDN, try serving the repo (e.g. VS Code Live Server) or let me generate a static PNG.
    </footer>
  </div>
</body>
</html>
